<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Heatmap</title>
    <script type="text/javascript" src="js/d3.v3.js"></script>

    <style>
        .chart div {
            font: 10px sans-serif;
            background-color: steelblue;
            text-align: right;
            padding: 3px;
            margin: 1px;
            color: white;
        }
    </style>
</head>
<body>
<div class="chart"></div>

<script type="text/javascript">

    d3.xml("ergodox_bepo.svg", "image/svg+xml", function (xml) {
        document.body.appendChild(xml.documentElement);
    });
</script>

<script type="text/javascript">
    var colors = ["#ffffd9", "#edf8b1", "#c7e9b4", "#7fcdbb", "#41b6c4", "#1d91c0", "#225ea8", "#253494", "#081d58", "#020b27"];

    d3.tsv("data.tsv",
            function (d) {
                return {
                    value: +d.value
                };
            }, function (error, data) {
                var buckets = 9;
                var colorScale = d3.scale.quantile()
                        .domain([0, buckets - 1, d3.max(data, function (d) {
                            return d.value;
                        })])
                        .range(colors);

                var svg = d3.select("svg");

                var paths = svg.selectAll('#layer1 path')
                                .data(data)
                                .attr("fill", function (d) {
                                    console.log(colorScale(d.value));
                                    colorScale(d.value);
                                })
                        ;
//                     .data(data)
//                     .enter()
//                     .select(function(d) {
//                         console.log(d);
//                         return "#" + d.id})
//                     .style("fill", colors[0])
            });

    //    var data = [4, 8, 15, 16, 23, 42];
    //
    //    var x = d3.scale.linear()
    //            .domain([0, d3.max(data)])
    //            .range([0, 420]);
    //
    //    d3.select(".chart")
    //            .selectAll("div")
    //            .data(data)
    //            .enter().append("div")
    //            .style("width", function (d) {
    //                return x(d) + "px";
    //            })
    //            .text(function (d) {
    //                return d;
    //            });
</script>
</body>
</html>